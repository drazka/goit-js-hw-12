{"version":3,"file":"page-2.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\n    document.getElementById('searchForm').addEventListener('submit', async function(event) {\n        event.preventDefault();\n\n        const loader = document.getElementById('loader');\n        loader.style.display = 'block'; \n\n        const q = document.getElementById('searchQuery').value;\n        const apiKey = '46413447-a6948cf821c6d061f8e7d4db1';\n        const perPage = 40;\n        let currentPage = 1;\n        let totalHits = 0;\n        let loadedImages = 0;\n\n        const galleryDiv = document.getElementById('gallery');\n        galleryDiv.innerHTML = '';\n        currentPage = 1;\n\n        async function fetchImages(query, page) {\n            const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`;\n            \n            try {\n                const response = await axios.get(url);\n                return response.data;\n            } catch (error) {\n                console.error('Error fetching data:', error);\n                return null;\n            }\n        }\n\n        function displayImages(data) {\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topCenter',\n                    backgroundColor: '#EF4040',\n                    position: 'topRight',\n                    iconUrl: './img/x-octagon.svg',\n                    iconColor: 'white',\n                    messageColor: '#FAFAFB'\n                });\n            } else {\n                data.hits.forEach(hit => {\n                    const imageCard = document.createElement('div');\n                    imageCard.className = 'image-card';\n\n                    const linkElement = document.createElement('a');\n                    linkElement.href = hit.largeImageURL;\n                    linkElement.setAttribute('data-lightbox', 'gallery');\n\n                    const imgElement = document.createElement('img');\n                    imgElement.src = hit.webformatURL;\n                    imgElement.alt = hit.tags;\n\n                    const imageInfo = document.createElement('div');\n                    imageInfo.className = 'image-info';\n                    imageInfo.innerHTML = `\n                        <p><strong>Likes:</strong> ${hit.likes}</p>\n                        <p><strong>Views:</strong> ${hit.views}</p>\n                        <p><strong>Comments:</strong> ${hit.comments}</p>\n                        <p><strong>Downloads:</strong> ${hit.downloads}</p>\n                    `;\n\n                    linkElement.appendChild(imgElement);\n                    imageCard.appendChild(linkElement);\n                    imageCard.appendChild(imageInfo);\n                    galleryDiv.appendChild(imageCard);\n                });\n\n                const lightbox = new SimpleLightbox('#gallery a', { /* options */ });\n                lightbox.refresh();\n\n                loadedImages += data.hits.length;\n\n                const loadMoreButton = document.getElementById('loadMoreButton');\n                if (loadedImages < totalHits) {\n                    loadMoreButton.style.display = 'block';\n                } else {\n                    loadMoreButton.style.display = 'none';\n                    iziToast.info({\n                        message: \"We're sorry, but you've reached the end of search results.\",\n                        position: 'topCenter',\n                        backgroundColor: '#4CAF50',\n                        position: 'topRight',\n                        messageColor: '#FAFAFB'\n                    });\n                }\n\n                const firstImageCard = document.querySelector('.image-card');\n                if (firstImageCard) {\n                    const cardHeight = firstImageCard.getBoundingClientRect().height;\n                    window.scrollBy({\n                        top: cardHeight * 2,\n                        behavior: 'smooth'\n                    });\n                }\n            }\n        }\n\n        const data = await fetchImages(q, currentPage);\n        if (data) {\n            totalHits = data.totalHits;\n            displayImages(data);\n        }\n\n        loader.style.display = 'none';\n\n        document.getElementById('loadMoreButton').addEventListener('click', async function() {\n            const loadMoreButton = document.getElementById('loadMoreButton');\n            loadMoreButton.style.display = 'none';\n            loader.style.display = 'block';\n            currentPage += 1;\n            const moreData = await fetchImages(q, currentPage);\n            if (moreData) {\n                displayImages(moreData);\n            }\n            loader.style.display = 'none';\n        });\n    });\n});"],"names":["event","loader","q","apiKey","perPage","currentPage","totalHits","loadedImages","galleryDiv","fetchImages","query","page","url","error","displayImages","data","hit","imageCard","linkElement","imgElement","imageInfo","loadMoreButton","firstImageCard","cardHeight","moreData"],"mappings":"0uBAAA,SAAS,iBAAiB,mBAAoB,UAAW,CACrD,SAAS,eAAe,YAAY,EAAE,iBAAiB,SAAU,eAAeA,EAAO,CACnFA,EAAM,eAAc,EAEpB,MAAMC,EAAS,SAAS,eAAe,QAAQ,EAC/CA,EAAO,MAAM,QAAU,QAEvB,MAAMC,EAAI,SAAS,eAAe,aAAa,EAAE,MAC3CC,EAAS,qCACTC,EAAU,GAChB,IAAIC,EAAc,EACdC,EAAY,EACZC,EAAe,EAEnB,MAAMC,EAAa,SAAS,eAAe,SAAS,EACpDA,EAAW,UAAY,GACvBH,EAAc,EAEd,eAAeI,EAAYC,EAAOC,EAAM,CACpC,MAAMC,EAAM,gCAAgCT,CAAM,MAAM,mBAAmBO,CAAK,CAAC,qEAAqEN,CAAO,SAASO,CAAI,GAE1K,GAAI,CAEA,OADiB,MAAM,MAAM,IAAIC,CAAG,GACpB,IACnB,OAAQC,EAAO,CACZ,eAAQ,MAAM,uBAAwBA,CAAK,EACpC,IACV,CACJ,CAED,SAASC,EAAcC,EAAM,CACzB,GAAIA,EAAK,KAAK,SAAW,EACrB,SAAS,MAAM,CACX,QAAS,2EACT,SAAU,YACV,gBAAiB,UACjB,SAAU,WACV,QAAS,sBACT,UAAW,QACX,aAAc,SAClC,CAAiB,MACE,CACHA,EAAK,KAAK,QAAQC,GAAO,CACrB,MAAMC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,aAEtB,MAAMC,EAAc,SAAS,cAAc,GAAG,EAC9CA,EAAY,KAAOF,EAAI,cACvBE,EAAY,aAAa,gBAAiB,SAAS,EAEnD,MAAMC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,IAAMH,EAAI,aACrBG,EAAW,IAAMH,EAAI,KAErB,MAAMI,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,aACtBA,EAAU,UAAY;AAAA,qDACWJ,EAAI,KAAK;AAAA,qDACTA,EAAI,KAAK;AAAA,wDACNA,EAAI,QAAQ;AAAA,yDACXA,EAAI,SAAS;AAAA,sBAGlDE,EAAY,YAAYC,CAAU,EAClCF,EAAU,YAAYC,CAAW,EACjCD,EAAU,YAAYG,CAAS,EAC/BZ,EAAW,YAAYS,CAAS,CACpD,CAAiB,EAEgB,IAAI,eAAe,aAAc,CAAiB,CAAA,EAC1D,QAAO,EAEhBV,GAAgBQ,EAAK,KAAK,OAE1B,MAAMM,EAAiB,SAAS,eAAe,gBAAgB,EAC3Dd,EAAeD,EACfe,EAAe,MAAM,QAAU,SAE/BA,EAAe,MAAM,QAAU,OAC/B,SAAS,KAAK,CACV,QAAS,6DACT,SAAU,YACV,gBAAiB,UACjB,SAAU,WACV,aAAc,SACtC,CAAqB,GAGL,MAAMC,EAAiB,SAAS,cAAc,aAAa,EAC3D,GAAIA,EAAgB,CAChB,MAAMC,EAAaD,EAAe,sBAAqB,EAAG,OAC1D,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QAClC,CAAqB,CACJ,CACJ,CACJ,CAED,MAAMR,EAAO,MAAMN,EAAYP,EAAGG,CAAW,EACzCU,IACAT,EAAYS,EAAK,UACjBD,EAAcC,CAAI,GAGtBd,EAAO,MAAM,QAAU,OAEvB,SAAS,eAAe,gBAAgB,EAAE,iBAAiB,QAAS,gBAAiB,CACjF,MAAMoB,EAAiB,SAAS,eAAe,gBAAgB,EAC/DA,EAAe,MAAM,QAAU,OAC/BpB,EAAO,MAAM,QAAU,QACvBI,GAAe,EACf,MAAMmB,EAAW,MAAMf,EAAYP,EAAGG,CAAW,EAC7CmB,GACAV,EAAcU,CAAQ,EAE1BvB,EAAO,MAAM,QAAU,MACnC,CAAS,CACT,CAAK,CACL,CAAC"}